/* --- EasyMDE Style Overrides --- */

/* General Editor Appearance */
.EasyMDEContainer .CodeMirror {
   border: 1px solid var(--input-border, #777); /* Was #ccc */
   border-radius: 3px;
   background-color: var(--input-bg, #555); /* Was #fff */
   color: var(--input-text, #eee); /* Was #333 */
}

/* Toolbar */
.editor-toolbar {
   border: 1px solid var(--input-border, #505050); /* Was var(--input-border, #ccc) */
   border-bottom: none;
   border-top-left-radius: 3px;
   border-top-right-radius: 3px;
   background-color: var(--nav-bg, #2e2e2e); /* Darker toolbar bg - Was var(--input-bg, #f0f0f0) */
   padding: 4px;
}

.editor-toolbar button {
    background: linear-gradient(to bottom, #4a4a4a 0%, #3c3c3c 100%); /* Dark silver gradient */
    color: var(--text-color, #ddd);
    border: 1px solid var(--input-border, #585858);
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    cursor: pointer;
    margin: 2px;
    font-size: 0.9em;
    box-shadow: 0 1px 1px rgba(0,0,0,0.25);
    transition: background 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
    height: auto;
    line-height: normal;
    vertical-align: middle; /* Better icon alignment */
}

.editor-toolbar button:hover {
    background: linear-gradient(to bottom, #525252 0%, #454545 100%);
    border-color: var(--input-border, #606060);
    box-shadow: 0 1px 2px rgba(0,0,0,0.35);
}

.editor-toolbar button.active,
.editor-toolbar button:active { /* Combined active and :active for consistency */
    background: linear-gradient(to bottom, #3a3a3a 0%, #2f2f2f 100%);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
    border-color: var(--input-border, #484848);
    transform: translateY(1px);
}

/* Ensure icons are visible and aligned */
.editor-toolbar button i.fa {
    color: var(--text-color, #ddd);
    vertical-align: middle;
}

/* Status Bar */
.editor-statusbar {
   border: 1px solid var(--input-border, #777); /* Was #ccc */
   border-top: none;
   border-bottom-left-radius: 3px;
   border-bottom-right-radius: 3px;
   background-color: var(--nav-bg, #333); /* Was #f9f9f9 */
   color: var(--post-meta-color, #bbb); /* Was #666 */
   font-size: 0.9em;
   padding: 2px 6px;
}

/* Adjust textarea margin if needed (EasyMDE hides the original textarea) */
#new-topic-content, #reply-content {
   margin-bottom: 0.5rem; /* Keep some space below editor */
}

/* --- Persona @mention Suggestions --- */
#personaMentionSuggestions {
    display: none; /* Initially hidden, shown by JS */
    position: absolute; /* Positioned by JS near cursor */
    background-color: var(--input-bg, #fff); /* Use theme background */
    border: 1px solid var(--input-border, #ccc);
    box-shadow: 2px 2px 5px rgba(0,0,0,0.15);
    max-height: 200px;
    overflow-y: auto;
    z-index: 1050; /* High z-index to appear above editor and other elements */
    min-width: 180px; /* Minimum width for readability */
    border-radius: 4px; /* Slightly rounded corners */
}

#personaMentionSuggestions > div {
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color, #eee); /* Use theme border color */
    color: var(--text-color, #333); /* Use theme text color */
}

#personaMentionSuggestions > div:last-child {
    border-bottom: none;
}

#personaMentionSuggestions > div:hover {
    background-color: var(--hover-bg, #f0f0f0); /* Use theme hover background */
}

#personaMentionSuggestions > div.selected { /* For keyboard navigation */
    background-color: var(--active-bg, #e0e0e0); /* Use theme active/selected background */
    color: var(--button-text, #000); /* Ensure text is readable on selection */
}